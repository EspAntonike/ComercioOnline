{% extends "base.html" %}

{% block content %}
<section class="mt-16 px-6" aria-label="Todos los productos">
  <h2 class="text-2xl font-bold text-center mb-8">üõçÔ∏è Todos los productos</h2>
  
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
    {% for p in productos %}
      <div class="border rounded-xl shadow bg-white p-4 flex flex-col">
        
        <!-- Imagen -->
        {% set primera_img = p['image_path'].split(',')[0] if p['image_path'] else None %}
        <div class="h-40 flex items-center justify-center mb-4">
          {% if primera_img %}
            <img src="{{ url_for('static', filename='uploads/' ~ primera_img.strip()) }}" alt="{{ p['name'] }}" class="max-h-full object-contain">
          {% else %}
            <span class="text-gray-400">Sin imagen</span>
          {% endif %}
        </div>

        <!-- Texto -->
        <p class="text-pink-600 text-sm font-semibold uppercase">{{ p['category'] }}</p>
        <h3 class="font-bold text-lg text-gray-900">{{ p['name'] }}</h3>
        <p class="text-gray-500 text-sm mb-4">Afiliado: {{ p['afiliado'] }}</p>

        <!-- Bot√≥n -->
        <a href="{{ url_for('producto', pid=p['id']) }}"
           class="mt-auto bg-black text-white text-center py-2 px-4 rounded-lg hover:bg-gray-800 transition">
           Ver caracter√≠sticas
        </a>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
